{{!-- style sheets --}}
<link rel="stylesheet" href="/stylesheets/index.css"> {{!-- body --}}
<div class="container">
    <p id="userId" style="display:none">{{userId}}</p>
    <div class="row text-center">
        <div class="col-xs-12 col-sm-12 col-md-12">
            {{#if name}} 
                <h1 style="font-size:60px">HELLO {{name}}</h1> 
            {{/if}}
            {{#if name}}
                <h4 id="welcomed" style="margin: 10px 0; display: block;">Welcome to {{greeting}}</h4> 
            {{/if}}
            {{#unless name}}
                <h4 id="welcome">Welcome to</h4>
                    <h1 id='akin-intro'>{{greeting}}</h1>
            {{/unless}}
            {{#unless name}}
                <a href="/login" style="margin-right:15px"> 
                    <button id="login-button" type="button" class="btn btn-primary">LOG IN</button>
                </a>
                <a href="/register">
                    <button id="register-button" type="button" class="btn btn-info">REGISTER</button>
                </a>
            {{/unless}} 
         
            {{#if name}}
            {{#unless location}}
                <form style="display:block; float: center;" class="form" action="/logout" name="logout" method="post">
                    <button id="logout-button" type="submit" class="btn btn-danger">LOG OUT</button>
                </form>
            {{/unless}}
            {{/if}}
        </div>
    </div>
    {{#if name}}
        <br> 
        {{#if location}}
            <div class="row text-center showOnLocation">
                <table id="nav">
                    <tr>
                        <td>
                            <form style="margin-right:15px" class="" action="/getMap" name="getMap" method="get">
                                <button id="getMap-btn" type="submit" class="btn btn-primary">VIEW MAP</button>
                            </form>
                        </td>
                        <td>
                            <button style="margin-right:15px" id="postPing-btn" type="button" class="btn btn-success">SEND PING</button>
                        </td>
                        <td>    
                            <form style="margin-right:15px" class="" action="/profile/{{userId}}" name="getBox" method="get">
                                <button id="navGetBox-btn" type="submit" class="btn btn-info">PROFILE</button>
                            </form>
                        </td>
                        <td>
                            <form class="" action="/logout" name="logout" method="post">
                                <button id="navLogout-btn" type="submit" class="btn btn-danger">LOG OUT</button>
                            </form>
                        </td>
                    </tr>
                </table>
            </div>
            <br>
            <div class="row text-center showOnLocation">
                <div class="col-xs-12 col-sm-6 col-md-6" style="border:solid black 1px;height:350px;max-height:400px;overflow: scroll; margin: 0 auto">
                    <h3>Signal Log</h3>
                    <hr>
                    <div id="pingLog">
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-6" style="border:solid black 1px;height:350px;max-height:400px;overflow: scroll; margin: 0 auto">
                    <h3>Active Signals</h3>
                    <hr>
                    <div id="activeLog" style="display:flex;flex-direction:column">
                    </div>
                </div>
            </div>
        {{else}}
            <div id="geo-submission" class="form-group hideOnLocation">
                <label for="searchTextField">Where are you from?</label>
                <div style="display:flex; justify-content:center;">
                    <input style="margin-right:10px" type="text" class="form-control" id="searchTextField" placeholder="Enter Location">
                    <button type="submit" id="locationSubmit-btn" class="btn btn-primary">Submit</button>
                </div>
                <small id="emailHelp">Be as general or as specific as you want to be.</small>
            </div>
        {{/if}} 
    {{/if}}
</div>

{{!-- client side scripts --}}
{{#unless name}}
    {{!--no name and no locaiton --}}
    <script src="/js/jquery.ripples.js"></script>
    <script>
        $(document).ready(function() {
            try {

                var screen= $('body');
                screen.ripples({
                    resolution: 512,
                    dropRadius: 20, //px
                    perturbance: 0.04,
                });

                //get location of center of title
                var title=$("#akin-intro");
                var offset=title.offset();
                var width=title.width();
                var height=title.height();
                var centerX=offset.left+width/2;
                var centerY=offset.top+height/2;

                //make some random values
                var strength = 0.04 + Math.random() * 0.04;
                var time = 1200 + Math.random() * 1000;
                var place = 50 + Math.random() * 1000;

                //make some ripples
                //$('something').ripples('drop', x, y, dropRadius, strength);
                $('body').ripples('drop', centerX, centerY, 80, 0.6); //title ripple
                setTimeout(function(){
                    $('body').ripples('drop', screen.width()-place, place, 15, strength)
                }, 1000);
                setTimeout(function(){
                    $('body').ripples('drop', place, screen.height()+20-place, 20, 0.3)
                }, time);
            }
            catch (e) {
                $('.error').show().text(e);
            }
        });
    </script>
{{/unless}}


{{#if name}} 
    <script src="/js/index.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
    {{#if location}}
    {{else}}
        <script src="/js/jquery.ripples.js"></script>
        <script>
            $(document).ready(function() {
                try {

                    var screen= $('body');
                    screen.ripples({
                        resolution: 512,
                        dropRadius: 20, //px
                        perturbance: 0.04,
                    });


                }
                catch (e) {
                    $('.error').show().text(e);
                }
            });
        </script>        
    {{/if}}
{{/if}}